{"version":3,"sources":["views/pages/ManualAttendance/AdminManualAttendance.js"],"names":["AddEmployee","navigate","useNavigate","parms","useParams","id","parseInt","isNaN","t","useTranslation","userByFrim","setUserByFrim","useState","attTypes","setAttTypes","picker","setPicker","Date","userTime","setUserTime","userDate","setUserDate","console","log","userId","setUserId","state","setState","userdate","usertime","attendanceTypeId","handleChange","e","target","name","value","useEffect","async","myHeaders","Headers","append","window","localStorage","getItem","formdata","FormData","requestOptions","method","headers","body","redirect","fetch","concat","process","REACT_APP_API_DOMAIN","REACT_APP_SUB_API_NAME","then","response","json","result","SUCCESS","data","DATA","createdOnDateByUser","createdOnTimeByUser","moment","createdOnByUserTimeDisplay","format","catch","error","getattendanceById","getUsers","getAttTypes","_jsx","Fragment","children","_jsxs","Form","onSubmit","document","getElementById","saveAtt","Row","Col","md","className","Label","Input","type","onChange","placeholder","length","map","obj","index","label","for","Flatpickr","dateFormat","event","selectedDates","selectedDate","formattedDate","handleDateFormat","formattedTime","handleTimeFormat","Button","color","outline","onClick"],"mappings":"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","file":"static/js/18.9d2d6293.chunk.js","sourcesContent":["// ** React Imports\r\nimport { useState, useEffect, useRef, Fragment } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { Alert } from \"reactstrap\";\r\nimport \"@styles/react/apps/app-users.scss\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport moment from \"moment\";\r\n\r\nimport Flatpickr from \"react-flatpickr\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { Label, Row, Col, Form, Input, Button } from \"reactstrap\";\r\n\r\nconst AddEmployee = () => {\r\n\r\n    const navigate = useNavigate()\r\n    let parms = useParams();\r\n    let id = parseInt(parms.id);\r\n    if (isNaN(id)) id = 0;\r\n    const { t } = useTranslation();\r\n    const [userByFrim, setUserByFrim] = useState([]);\r\n    const [attTypes, setAttTypes] = useState([]);\r\n\r\n\r\n  const [picker, setPicker] = useState(new Date());\r\n  const [userTime, setUserTime] = useState(new Date());\r\n  const [userDate, setUserDate] = useState(new Date());\r\n  console.log(\"data is\");\r\n  const datecheck = (date) => {\r\n    (date) => setPicker(date);\r\n    console.log(picker);\r\n  };\r\n  const [userId, setUserId] = useState(\"\");\r\n  //   const [userTime, setUserTime] = React.useState(dayjs(new Date()));\r\n  //   const [userDate, setUserDate] = React.useState(dayjs(new Date()));\r\n\r\n  const [state, setState] = useState({\r\n    userdate: \"\",\r\n    usertime: \"\",\r\n    attendanceTypeId: \"\",\r\n    userId: \"\",\r\n  });\r\n  const handleChange = (e) => {\r\n    setState({ ...state, [e.target.name]: e.target.value });\r\n  };\r\n  const getAttTypes = async () => {\r\n    var myHeaders = new Headers();\r\n    myHeaders.append(\r\n      \"Authorization\",\r\n      \"Bearer \" + window.localStorage.getItem(\"AtouBeatXToken\")\r\n    );\r\n\r\n    var formdata = new FormData();\r\n\r\n    var requestOptions = {\r\n      method: \"POST\",\r\n      headers: myHeaders,\r\n      body: formdata,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    await fetch(\r\n      `${process.env.REACT_APP_API_DOMAIN}${process.env.REACT_APP_SUB_API_NAME}/Attendances/GetAttendanceTypesDropdown`,\r\n      requestOptions\r\n    )\r\n      .then((response) => response.json())\r\n      .then((result) => {\r\n        if (result.SUCCESS === 1) {\r\n          let data = result.DATA;\r\n          if (data) {\r\n            setAttTypes(data);\r\n          }\r\n        } else {\r\n          //   handleOpenSnackbar(<span>{result.USER_MESSAGE}</span>, \"error\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"error\", error);\r\n        // handleOpenSnackbar(\r\n        //   \"Failed to fetch ! Please try Again later.\",\r\n        //   \"error\"\r\n        // );\r\n      });\r\n  };\r\n  const getUsers = async () => {\r\n    var myHeaders = new Headers();\r\n    myHeaders.append(\r\n      \"Authorization\",\r\n      \"Bearer \" + window.localStorage.getItem(\"AtouBeatXToken\")\r\n    );\r\n\r\n    var formdata = new FormData();\r\n\r\n    var requestOptions = {\r\n      method: \"POST\",\r\n      headers: myHeaders,\r\n      body: formdata,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    await fetch(\r\n      `${process.env.REACT_APP_API_DOMAIN}${process.env.REACT_APP_SUB_API_NAME}/Attendances/GetUsersDropdownByFirm`,\r\n      requestOptions\r\n    )\r\n      .then((response) => response.json())\r\n      .then((result) => {\r\n        if (result.SUCCESS === 1) {\r\n          let data = result.DATA;\r\n          if (data) {\r\n            setUserByFrim(data);\r\n          }\r\n        } else {\r\n          //   handleOpenSnackbar(<span>{result.USER_MESSAGE}</span>, \"error\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"error\", error);\r\n        // handleOpenSnackbar(\r\n        //   \"Failed to fetch ! Please try Again later.\",\r\n        //   \"error\"\r\n        // );\r\n      });\r\n  };\r\n  const saveAtt = async () => {\r\n    var myHeaders = new Headers();\r\n    myHeaders.append(\r\n      \"Authorization\",\r\n      \"Bearer \" + window.localStorage.getItem(\"AtouBeatXToken\")\r\n    );\r\n\r\n    var formdata = new FormData(document.getElementById(\"attForm\"));\r\n    formdata.append(\"id\", id);\r\n    formdata.append(\"createdOnDateByUser\",state.userdate );\r\n    formdata.append(\"createdOnTimeByUser\",state.usertime );\r\n\r\n    console.log(formdata);\r\n\r\n    var requestOptions = {\r\n      method: \"POST\",\r\n      headers: myHeaders,\r\n      body: formdata,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    await fetch(\r\n      `${process.env.REACT_APP_API_DOMAIN}${process.env.REACT_APP_SUB_API_NAME}/Attendances/SaveManual`,\r\n      requestOptions\r\n    )\r\n      .then((response) => response.json())\r\n      .then((result) => {\r\n        if (result.SUCCESS === 1) {\r\n          //   handleOpenSnackbar(<span>{result.USER_MESSAGE}</span>, \"success\");\r\n        } else {\r\n          //   handleOpenSnackbar(<span>{result.USER_MESSAGE}</span>, \"error\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"error\", error);\r\n        // handleOpenSnackbar(\r\n        //   \"Failed to fetch ! Please try Again later.\",\r\n        //   \"error\"\r\n        // );\r\n      });\r\n  };\r\n  const getattendanceById = async (id) => {\r\n   \r\n    // setIsLoading(true);\r\n    if (id === 0) {\r\n      //   setIsLoading(false);\r\n      return;\r\n    }\r\n    var myHeaders = new Headers();\r\n    myHeaders.append(\r\n      \"Authorization\",\r\n      \"Bearer \" + window.localStorage.getItem(\"AtouBeatXToken\")\r\n    );\r\n\r\n    var formdata = new FormData();\r\n    formdata.append(\"id\", id);\r\n\r\n    var requestOptions = {\r\n      method: \"POST\",\r\n      headers: myHeaders,\r\n      body: formdata,\r\n      redirect: \"follow\",\r\n    };\r\n\r\n    await fetch(\r\n      `${process.env.REACT_APP_API_DOMAIN}${process.env.REACT_APP_SUB_API_NAME}/Attendances/GetManualByIdAndFirm`,\r\n      requestOptions\r\n    )\r\n      .then((response) => response.json())\r\n      .then((result) => {\r\n        console.log(\"getStoreById:\", result);\r\n        if (result.SUCCESS === 1) {\r\n          let data = result.DATA;\r\n          if (data) {\r\n            console.log(data);\r\n            setState({\r\n              userdate: data.createdOnDateByUser,\r\n              usertime: data.createdOnTimeByUser,\r\n              attendanceTypeId: data.attendanceTypeId,\r\n              userId: data.userId\r\n            });\r\n           \r\n            setUserTime(moment(data.createdOnByUserTimeDisplay, 'hh:mm a').format('HH:mm'));\r\n            setUserDate(new Date(data.createdOnDateByUser));\r\n\r\n            \r\n          }\r\n        } else {\r\n          //   handleOpenSnackbar(<span>{result.USER_MESSAGE}</span>, \"error\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"error\", error);\r\n        // handleOpenSnackbar(\r\n        //   \"Failed to fetch ! Please try Again later.\",\r\n        //   \"error\"\r\n        // );\r\n      });\r\n    // setIsLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getattendanceById(id);\r\n    getUsers();\r\n    getAttTypes();\r\n  }, []);\r\n\r\n  const handleNavigation = () => {\r\n\r\n    navigate(\"/ViewAllAttendanceData\");\r\n  };\r\n\r\n\r\n  const handleDateFormat = (selectedDates) => {\r\n    const selectedDate = selectedDates[0];\r\n    setUserDate(selectedDate)\r\n    const formattedDate = moment(selectedDate).format(\"DD/MM/YYYY\");\r\n    setState({\r\n        ...state,\r\n        userdate: formattedDate\r\n    })\r\n    console.log(formattedDate);\r\n  };\r\n\r\n  const handleTimeFormat = (event) => {\r\n\r\n    const selectedDate = event.target.value;\r\n    setUserTime(selectedDate)\r\n  \r\n    setPicker(selectedDate);\r\n\r\n    const formattedTime = moment(selectedDate, \"HH:mm:ss\").format(\"hh:mm a\");\r\n   \r\n    setState({\r\n        ...state,\r\n        usertime: formattedTime\r\n    })\r\n \r\n  };\r\n\r\n\r\n  return (\r\n    <Fragment>\r\n      <Form id=\"attForm\" onSubmit={() => saveAtt()}>\r\n        <Row>\r\n          <Col md=\"6\" className=\"mb-1\">\r\n            <Label className=\"form-label\">{t(\"Select Employee\")}</Label>\r\n            <Input\r\n              type=\"select\"\r\n              id=\"userId\"\r\n              name=\"userId\"\r\n              value={state.userId}\r\n              onChange={handleChange}\r\n              placeholder=\"Select Employee\"\r\n            >\r\n              <option></option>\r\n              {userByFrim && userByFrim.length > 0\r\n                ? userByFrim.map((obj, index) => (\r\n                    <option value={obj.id} key={obj.id}>\r\n                      {obj.label}\r\n                    </option>\r\n                  ))\r\n                : null}\r\n            </Input>\r\n          </Col>\r\n          <Col md=\"6\" className=\"mb-1\">\r\n            <Label className=\"form-label\">{t(\"Attendance Type\")}</Label>\r\n            <Input\r\n              type=\"select\"\r\n              name=\"attendanceTypeId\"\r\n              id=\"attendanceTypeId\"\r\n              placeholder=\"Attendance Type\"\r\n              value={state.attendanceTypeId}\r\n              onChange={handleChange}\r\n            >\r\n              <option></option>\r\n              {attTypes && attTypes.length > 0\r\n                ? attTypes.map((obj, index) => (\r\n                    <option value={obj.id} key={obj.id}>\r\n                      {obj.label}\r\n                    </option>\r\n                  ))\r\n                : null}\r\n            </Input>\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col md=\"6\" className=\"mb-1\">\r\n            <Label className=\"form-label\" for=\"date-time-picker\">\r\n              Attendance Date\r\n            </Label>\r\n            <Flatpickr\r\n              value={userDate}\r\n              // altInput= {true}\r\n              //   dateFormat= \"YYYY-MM-DD\"\r\n              //   altFormat= \"DD-MM-YYYY\"\r\n              //   allowInput= {true}\r\n              dateFormat=\"Y-m-d\"\r\n              id=\"date-time-picker\"\r\n              className=\"form-control\"\r\n              onChange={(event) => handleDateFormat(event)}\r\n            />\r\n          </Col>\r\n          <Col md=\"6\" className=\"mb-1\">\r\n            <Label className=\"form-label\" for=\"date-time-picker\">\r\n              Attendance Time\r\n            </Label>\r\n           \r\n            <Input\r\n              value={userTime}\r\n              type=\"time\" // Set type to \"time\"\r\n              id=\"time-picker\" // Unique identifier\r\n              className=\"form-control\"\r\n              onChange={(event) => handleTimeFormat(event)}\r\n            />\r\n          </Col>\r\n        </Row>\r\n\r\n        <div className=\"d-flex justify-content-between\">\r\n          <Button\r\n            color=\"secondary\"\r\n            className=\"btn-prev\"\r\n            outline\r\n            onClick={() => handleNavigation()}\r\n          >\r\n            <span className=\"align-middle d-sm-inline-block d-none\">View</span>\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            color=\"primary\"\r\n            className=\"btn-next\"\r\n            //   onClick={}\r\n          >\r\n            <span className=\"align-middle d-sm-inline-block d-none\">{id!==0?\"Update\":\"Save\"}</span>\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n    </Fragment>\r\n  );\r\n};\r\nexport default AddEmployee;\r\n"],"sourceRoot":""}